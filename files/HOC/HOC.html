<!--
    Powered By nodeppt - This is probably the best web presentation tool so far!
    version: 1.4.5
    site: https://github.com/ksky521/nodeppt
    date: 
-->
<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>HOC - By wangjuanmicky</title>
    <link rel="stylesheet" media="all" href="./css/nodeppt.css">
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="./css/phone.css">
    
    <link rel="stylesheet" href="./js/highlight/styles/monokai_sublime.css">
    <link rel="stylesheet" href="./css/font-awesome.css">
    
<link rel="stylesheet" href="./css/theme.moon.css">
</head>
<body>
<div class="slides">
    <slides id="container">
        <slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article class="flexbox vcenter">
<h1>HOCÂ·é«˜é˜¶ç»„ä»¶</h1>
<h2>æ¼”è®²è€…ï¼šæ±ªå¨Ÿ</h2>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article class="flexbox vcenter">
<h1>ä»Šå¤©è®²äº›ä»€ä¹ˆ?</h1>
<h3>WHAT &amp; WHY &amp; HOW</h3>
<img src="../imgs/1.jpg" style="width:30%;margin:0 auto;">

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article class="flexbox vcenter">
<h1>WHAT</h1>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"  data-on-build="Slide.magic" data-on-enter="Slide.magic.init"><section class="slide-wrapper"><div class="magic"><div class="magicItem current pagedown"  data-transition="newspaper"><article>
<div class="magic-wrapper">
<hgroup>
<h2>WHAT-å‘½åæ¥æº</h2>

</hgroup><article>

<blockquote>
<p>é«˜é˜¶å‡½æ•°ï¼šæŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥</p>
</blockquote>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼šArray.forEachã€Array.mapã€setTimeoutã€ä¸­é—´ä»¶</strong></p>
<pre><code class="javascript">// map
[1, 2, 3].map(function(i) {
  return i * 2;
});

// ä¸­é—´ä»¶
function middleware(store) {
  return function(next) {
    return function(action) {
      // do the thing
    }
  }
}
</code></pre>

</article>
</div>
</article></div>
<div class="magicItem next pagedown"  data-transition="newspaper"><article>
<div class="magic-wrapper">
<hgroup>
<h2>WHAT-å®šä¹‰</h2>

</hgroup><article>

<blockquote>
<p>é«˜é˜¶ç»„ä»¶ï¼šä»¥ä¸€ä¸ªç»„ä»¶ä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æ–°ç»„ä»¶çš„æ–¹æ³•</p>
</blockquote>
<pre><code class="jsx">import React, { Component } from &#39;react&#39;;

export default (WrappedComponent) =&gt; {
  class NewComponent extends Component {
    // å¯ä»¥åšå¾ˆå¤šè‡ªå®šä¹‰é€»è¾‘
    render () {
      return &lt;WrappedComponent /&gt;
    }
  }
  return NewComponent
}
</code></pre>

</article>
</div>
</article></div></div></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article class="flexbox vcenter">
<h1>WHY</h1>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"  data-on-build="Slide.magic" data-on-enter="Slide.magic.init"><section class="slide-wrapper"><div class="magic"><div class="magicItem current pagedown" data-transition="fade"><article>
<div class="magic-wrapper">
<hgroup>
<h2>WHY-ç”¨å¤„</h2>

</hgroup><article>

<ul>
<li>å±æ€§ä»£ç†(Props Proxy)<ul>
<li>æ“ä½œ props</li>
<li>é€šè¿‡ Refs è®¿é—®åˆ°ç»„ä»¶å®ä¾‹</li>
<li>æå– state</li>
<li>ç”¨å…¶ä»–å…ƒç´ åŒ…è£¹ WrappedComponent</li>
</ul>
</li>
<li>åå‘ç»§æ‰¿(Inheritance Inversion)<ul>
<li>æ¸²æŸ“åŠ«æŒ<pre><code class="js">function iiHOC(WrappedComponent) {
  return class Enhancer extends WrappedComponent {
    render() {
      return super.render()
    }
  }
}
</code></pre>
</li>
<li>æ“ä½œ state</li>
</ul>
</li>
</ul>

</article>
</div>
</article></div>
<div class="magicItem next pagedown" data-transition="fade"><article>
<div class="magic-wrapper">
<hgroup>
<h2>WHY-ç”¨å¤„</h2>

</hgroup><article>

<div class="columns2" style="margin-top:60px;">
  <ul>
    <li>å±æ€§ä»£ç†ï¼ˆProps Proxy)</li>
    <li>åå‘ç»§æ‰¿ (Inheritance Inversion)</li>
  </ul>
  <span style="font-size:38px;"><strong>ä»£ç å¤ç”¨</strong></span>
</div>
</article>
</div>
</article></div></div></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article class="flexbox vcenter">
<h1>HOW-ä»ä¸€ä¸ªğŸŒ°å¼€å§‹</h1>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"  data-on-build="Slide.magic" data-on-enter="Slide.magic.init"><section class="slide-wrapper"><div class="magic"><div class="magicItem current pagedown"  data-transition="fadeIn"><article>
<div class="magic-wrapper">
<article>

<blockquote>
<p>è¯„è®ºåˆ—è¡¨ç»„ä»¶:ä»å¤–éƒ¨æ•°æ®æºè®¢é˜…æ•°æ®å¹¶æ¸²æŸ“è¯„è®ºåˆ—è¡¨</p>
<pre><code class="jsx">class CommentList extends React.Component {
  state = {
    comments: DataSource.getComments()// &quot;DataSource&quot; å°±æ˜¯å…¨å±€çš„æ•°æ®æº
  };
  handleChange = () =&gt; { // ä»»ä½•æ—¶å€™æ•°æ®å‘ç”Ÿæ”¹å˜å°±æ›´æ–°ç»„ä»¶
    this.setState({ comments: DataSource.getComments()});
  }
  componentDidMount() { // æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°è®¢é˜…æ•°æ®
    DataSource.addChangeListener(this.handleChange);
  }
  componentWillUnmount() {// æ¸…é™¤äº‹ä»¶å¤„ç†å‡½æ•°
    DataSource.removeChangeListener(this.handleChange);
  }
  render() {
    return &lt;div&gt;
      {this.state.comments.map((comment) =&gt; (
        &lt;Comment comment={comment} key={comment.id} /&gt;
      ))}
    &lt;/div&gt;
  }
}
</code></pre>
</blockquote>

</article>
</div>
</article></div>
<div class="magicItem next pagedown"  data-transition="fadeIn"><article>
<div class="magic-wrapper">
<article>
<blockquote>
<p>åšå®¢è®¢é˜…ç»„ä»¶ï¼šæ ‡å¿—å•ä¸ªåšå®¢æ–‡ç« çš„è®¢é˜…çŠ¶æ€</p>
<pre><code class="jsx">class BlogPost extends React.Component {
  handleChange = () =&gt; {
    this.setState({
      blogPost: DataSource.getBlogPost(this.props.id)
    });
  }
  state = {
    blogPost: DataSource.getBlogPost(props.id)
  };
  componentDidMount() {
    DataSource.addChangeListener(this.handleChange);
  }
  componentWillUnmount() {
    DataSource.removeChangeListener(this.handleChange);
  }
  render() {
    return &lt;TextBlock text={this.state.blogPost} /&gt;;
  }
}
</code></pre>
</blockquote>

</article>
</div>
</article></div>
<div class="magicItem far-next pagedown"  data-transition="fadeIn"><article>
<div class="magic-wrapper">
<article>
<blockquote>
<p>è®¾æƒ³ä¸‹åº”ç”¨åœºæ™¯</p>
<pre><code class="jsx">const CommentListWithSubscription = withSubscription(
  CommentList,
  (DataSource) =&gt; DataSource.getComments()
);
const BlogPostWithSubscription = withSubscription(
  BlogPost,
  (DataSource, props) =&gt; DataSource.getBlogPost(props.id)
});
</code></pre>
</blockquote>

</article>
</div>
</article></div>
<div class="magicItem "  data-transition="fadeIn"><article>
<div class="magic-wrapper">
<article>
<blockquote>
<p>æœ€ç»ˆç»“æœ</p>
<pre><code class="jsx">function withSubscription(WrappedComponent, selectData) {
  return class extends React.Component {
    state = {
      data: selectData(DataSource, props)
    };
    handleChange = () =&gt; {
      this.setState({
        data: selectData(DataSource, this.props)
      });
    }
    componentDidMount() {
      DataSource.addChangeListener(this.handleChange);
    }
    componentWillUnmount() {
      DataSource.removeChangeListener(this.handleChange);
    }
    render() {
      return &lt;WrappedComponent data={this.state.data} {...this.props} /&gt;;
    }
  };
}
</code></pre>
</blockquote>

</article>
</div>
</article></div></div></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>HOW-å…¬çº¦</h2>
<h2>ç»¼ä¸Šæ‰€è¿°ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ª<strong>æ²¡æœ‰å‰¯ä½œç”¨çš„çº¯ç»„ä»¶</strong></h2>
<ul class="rollIn">
<li>ä¸è¦æ”¹å˜åŸå§‹ç»„ä»¶ï¼ˆå¦åˆ™ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼‰</li>
<li>ä¸ç›¸å…³çš„å‚æ•°ä¸åº”è¯¥ä¼ é€’ç»™è¢«åŒ…è£¹çš„ç»„ä»¶ï¼ˆç¡®ä¿å¯æ‰©å±•æ€§å’Œå¯å¤ç”¨æ€§ï¼‰</li>
<li>ç»™åŒ…è£¹ç»„ä»¶ä¸€ä¸ªåè¯ï¼ˆä¾¿äºdebugï¼‰</li>
<li>HOCä»…æ¥æ”¶å•ä¸€å‚æ•°çš„ï¼Œå³<code>Component =&gt; Component</code>ï¼ˆæ–¹ä¾¿æ’åˆ—ç»„åˆï¼‰<pre><code class="js">// æ™®é€šçš„åšæ³•
const EnhancedComponent = connect(commentSelector)(withRouter(WrappedComponent))
// æ›´å¥½çš„åšæ³•
// compose(f, g, h) å’Œ (...args) =&gt; f(g(h(...args))) æ•ˆæœä¸€æ ·
const enhance = compose(
// ä»–ä»¬éƒ½æ˜¯æ¥æ”¶å•ä¸€å‚æ•°çš„ HOC
connect(commentSelector),
withRouter
)
const EnhancedComponent = enhance(WrappedComponent)
</code></pre>
</li>
</ul>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„äº‹é¡¹</h2>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„1-ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåº</h2>
<iframe data-src="http://jsbin.com/tojapeb/5/edit?js" src="about:blank;" style="height:80vh;width:100%;"></iframe>
</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„1-ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåº(åå‘ç»§æ‰¿)</h2>
<iframe data-src="http://jsbin.com/tojapeb/7/edit?js" src="about:blank;" style="height:80vh;width:100%;"></iframe>
</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„2-ä¸è¦å†renderå‡½æ•°ä¸­ä½¿ç”¨é«˜é˜¶ç»„ä»¶</h2>
<pre><code class="js">render() {
  // æ¯ä¸€æ¬¡renderå‡½æ•°è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„EnhancedComponentå®ä¾‹
  // EnhancedComponent1 !== EnhancedComponent2
  const EnhancedComponent = enhance(MyComponent);
  // æ¯ä¸€æ¬¡éƒ½ä¼šä½¿å­å¯¹è±¡æ ‘å®Œå…¨è¢«å¸è½½æˆ–ç§»é™¤
  return &lt;EnhancedComponent /&gt;;
}
</code></pre>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„3-å¿…é¡»å°†é™æ€æ–¹æ³•åšæ‹·è´</h2>
<pre><code class="js">// å®šä¹‰é™æ€æ–¹æ³•
WrappedComponent.staticMethod = function() {/*...*/}
// ä½¿ç”¨é«˜é˜¶ç»„ä»¶
const EnhancedComponent = enhance(WrappedComponent);
// å¢å¼ºå‹ç»„ä»¶æ²¡æœ‰é™æ€æ–¹æ³•
typeof EnhancedComponent.staticMethod === &#39;undefined&#39; // true
---ä½ å¯ä»¥åƒä¸‹é¢é‚£ä¹ˆåš
function enhance(WrappedComponent) {
  class Enhance extends React.Component {/*...*/}
  // å¿…é¡»å¾—çŸ¥é“è¦æ‹·è´çš„æ–¹æ³• :(
  Enhance.staticMethod = WrappedComponent.staticMethod;
  return Enhance;
}
</code></pre>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>
<h2>æ³¨æ„4-Refså±æ€§ä¸èƒ½ä¼ é€’</h2>
<pre><code class="js">function Field({ inputRef, ...rest }) {
  return &lt;input ref={inputRef} {...rest} /&gt;;
}
// åœ¨é«˜é˜¶ç»„ä»¶ä¸­å¢å¼ºFieldç»„ä»¶
const EnhancedField = enhance(Field);
// ç»„ä»¶çš„renderå‡½æ•°ä¸­â€¦â€¦
&lt;EnhancedField
  inputRef={(inputEl) =&gt; {
    // è¯¥å›è°ƒå‡½æ•°è¢«ä½œä¸ºå¸¸è§„çš„propså±æ€§ä¼ é€’
    this.inputEl = inputEl
  }}
/&gt;
// ç°åœ¨ä½ å°±å¯ä»¥æ„‰å¿«çš„è°ƒç”¨æ§åˆ¶å‡½æ•°äº†
this.inputEl.focus();
</code></pre>

</article></section></slide>
<slide class="slide" data-transition="vertical3d"><section class="slide-wrapper"><article>

<p>è°¢è°¢å¤§å®¶ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥å¯å‘å’Œå¸®åŠ©~</p>

</article></section></slide>
        

        <!-- <slide class="slide logoslide dark nobackground">
            <article class="flexbox vcenter">
                <h2 style="color: white;">Powered By nodeppt v1.4.5</h2>
            </article>
        </slide> -->
        <div class="slideTip" id="tip"></div>
    </slides>
</div>
<canvas id="drawBoard" class="draw-board" width="900" height="700"></canvas>
<div class="progress"><span id="progress"></span></div>
<div id="_buttons">
    <div class="_btn-box" id="_btn-box" style="display:none;">
        <button class="fa fa-arrow-circle-left" id="_btn-prev"></button>
        <button class="fa fa-arrow-circle-right" id="_btn-next"></button>
        <button class="fa fa-paint-brush" id="_btn-brush"></button>
        <button class="fa fa-compress" id="_btn-overview" data-toggle="fa fa-expand"></button>
    </div>
    <button class="fa fa-bars" id="_btn-bar"  data-toggle="fa fa-close"></button>
</div>
<script src="./js/mixjs/lib/mix.0.3.0.min.js"></script>
<script>
    var ASSET_RELATIVE_DIR = ".";
</script>
<script>
var base = location.protocol + '//' + location.host;

var path = (location.pathname + '#').split('/').filter(function(v){
    return !!v;
});
path.pop();
path = path.join('/');
if (typeof ASSET_RELATIVE_DIR === 'string') {
    path = path + '/' + ASSET_RELATIVE_DIR;
}
MixJS.config({
    baseURL: [ base, path, 'js'].join('/')+'/'
});

</script>
<script src="./js/mixjs/lib/event/broadcast.js"></script>
<script src="./js/nodeppt.js"></script>
<script>
Slide.init({
    containerID: 'container',
    drawBoardID: 'drawBoard',
    slideClass: '.slide',
    buildClass: '.build',
    progressID: 'progress',
    transition: 'cards',
    width: 1100,
    dir: './',
    
    //æ‰“å¼€ä¸‹é¢çš„æ³¨é‡Šå°±å¼€å¯postMessageæ–¹å¼
    //è®¿é—®ç½‘å€127.0.0.1:8080/ppt/demo#client
    control:{
        type: 'postMessage',
        args:{
            isControl:  false
        }
    },
    
    tipID: 'tip'
});
MixJS.loadJS('highlight/highlight.pack.js',function(){
    hljs.tabReplace = '  ';
    hljs.initHighlightingOnLoad();
});
</script>
<script src="./js/demo.js"></script>
<link rel="stylesheet" href="./css/demo.css">

<!--placeholder-->
</body>
</html>
